<!DOCTYPE html>
<html lang="en" class="no-js" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Applications by Offer</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="Themesdesign" />

    <link rel="shortcut icon" href="images/favicon.ico">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="../../css/bootstrap.min.css" type="text/css">

    <!--Material Icon -->
    <link rel="stylesheet" type="text/css" href="../../css/materialdesignicons.min.css" />

    <link rel="stylesheet" type="text/css" href="../../css/fontawesome.css" />

    <!-- selectize css -->
    <link rel="stylesheet" type="text/css" href="../../css/selectize.css" />

    <!--Slider-->
    <link rel="stylesheet" href="../../css/owl.carousel.css" />
    <link rel="stylesheet" href="../../css/owl.theme.css" />
    <link rel="stylesheet" href="../../css/owl.transitions.css" />

    <!-- Custom  Css -->
    <link rel="stylesheet" type="text/css" href="../../css/style.css" />

</head>

<body>
<!-- Loader -->
<div id="preloader">
    <div id="status">
        <div class="spinner">
            <div class="double-bounce1"></div>
            <div class="double-bounce2"></div>
        </div>
    </div>
</div>
<!-- Loader -->

<!-- Navigation Bar-->
<header id="topnav" class="defaultscroll scroll-active">
    <!-- Menu Start -->
    <div class="container">
        <!-- Logo container-->
        <div>
            <a href="mySpaceRecruiter.html" class="logo">
                <img src="../../images/light3.png" alt="" class="logo-light"  height="60"  width="230" />
                <img src="../../images/dark3.png" alt="" class="logo-dark" height="60"  width="230" />
            </a>
        </div>
        <div class="buy-button">
            <a th:href = "@{/offers/showAddForm}" class="btn btn-primary" style="background-color: rgb(245, 209, 93);"><i class="mdi mdi-cloud-upload"></i> Post a Job</a>
        </div><!--end login button-->

        <!-- End Logo container-->
        <div class="menu-extras">
            <div class="menu-item">
                <!-- Mobile menu toggle-->
                <a class="navbar-toggle">
                    <div class="lines">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </a>
                <!-- End mobile menu toggle-->
            </div>
        </div>

        <div id="navigation">
            <!-- Navigation Menu-->
            <ul class="navigation-menu">
                <li><a th:href = "@{/offers}">Home</a></li>
                <li><a th:href = "@{/recruiters/checkApplications}" >Applications</a></li>
                <li><a th:href = "@{/recruiters/checkInterviews}">Interviews</a></li>

                <li class="has-submenu">
                    <a href="javascript:void(0)">Search</a><span class="menu-arrow"></span>
                    <ul class="submenu">
                        <li><a th:href="@{/allresumes}">Candidates Listing</a></li>
                        <li><a th:href="@{/alljobs}">Offers Listing</a></li>
                    </ul>
                </li>
                <li class="has-submenu">
                    <a href="javascript:void(0)">My profile </a><span class="menu-arrow"></span>
                    <ul class="submenu">
                        <li><a th:href="@{/myProfile}">My profile</a></li>
                        <li><a th:href="@{/editAccount}" >Account settings</a></li>
                        <li><a th:href = "@{/delete}">Delete account</a></li>
                        <li><a th:href = "@{/logout}">Sign out </a></li>
                    </ul>
                </li>
            </ul><!--end navigation menu-->
        </div><!--end navigation-->
    </div><!--end container-->
    <!--end end-->
</header><!--end header-->
<!-- Navbar End -->
    
    <!-- Start home -->
    <section class="bg-half page-next-level"> 
        <div class="bg-overlay"></div>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="text-center text-white">
                        <h4 class="text-uppercase title mb-4">Application Listing</h4>
                        <ul class="page-next d-inline-block mb-0">
                            <li><a href="index.html" class="text-uppercase font-weight-bold">Home</a></li>
                            <li><a href="#" class="text-uppercase font-weight-bold">My Offers</a></li>
                            <li>
                                <span class="text-uppercase text-white font-weight-bold">Applications by Offer</span> 
                            </li> 
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="container">
        <div class="home-form-position">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="home-registration-form job-list-reg-form bg-light shadow p-4">
                        <form lass="registration-form"  action="#" th:action="@{/searchResume}" method="post">
                            <div class="row">
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <i class="fa fa-briefcase"></i>
                                        <input name="rechResume"  required type="text" id="exampleInputName1" class="form-control rounded registration-input-box" placeholder="Resume keywords...">
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <i class="fa fa-briefcase"></i>
                                        <input name="experience" type="text" id="exampleInputName2" class="form-control rounded registration-input-box" placeholder="Experience">
                                    </div>
                                </div>
                                <!--                                            <div class="col-lg-3 col-md-6">-->
                                <!--                                                <div class="registration-form-box">-->
                                <!--                                                    <i class="fa fa-location-arrow"></i>-->
                                <!--                                                    <input name="location" type="text" id="exampleInputName2" class="form-control rounded registration-input-box" placeholder="City , Country">-->
                                <!--                                                </div>-->
                                <!--                                            </div>-->
                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <i class="fa fa-list-alt"></i>
                                        <input name="skills" type="text" id="exampleInputName3" class="form-control rounded registration-input-box" placeholder="Skills">
                                    </div>
                                </div>

                                <div class="col-lg-3 col-md-6">
                                    <div class="registration-form-box">
                                        <input type="submit" id="submit" name="send" class="submitBnt btn btn-primary btn-block" value="Submit" style="background-color: rgb(245, 209, 93);">
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end home -->

    

    <!-- CANDIDATES LISTING START -->
    <section class="section pt-0">
        <div class="container">
            <!-- <div class="row align-items-center">
                <div class="col-lg-12">
                    <div class="show-results">
                        <div class="float-left">
                            <h5 class="text-dark mb-0 pt-2">Showing  Results : 1-6 of 540</h5>
                        </div>
                    </div>
                </div>
            </div> -->
            


            <!--Offer-->
    <div class="col-lg-8 col-md-8">
        <div class="candidates-listing-item">
            <div class="border mt-4 rounded p-3">
            <div class="row">
                <div class="col-md-9">
                    <!-- <div class="float-left mr-4">
                        <img src="https://via.placeholder.com/400X400//88929f/5a6270C/O https://placeholder.com/" alt="" class="d-block rounded" height="90">
                    </div> -->
                    <div class="candidates-list-desc overflow-hidden job-single-meta  pt-2">
                        <h5 class="mb-2"><a href="#" class="text-dark"><span th:text="${offer.profile}"></span></a></h5>
                        <ul class="list-unstyled">
                            <li class="text-muted"><i class="mdi mdi-account mr-1"></i><span th:text="${offer.companyName}"></span></li>
                            <li class="text-muted"><a href="" class="text-muted"><i class="mdi mdi-map-marker mr-1"></i><span th:text="${offer.location}"></span></a></li>
                            <li class="text-muted"><i class="mdi mdi-currency-usd mr-1"></i><span th:text="${offer.salary}"></span></li>
                        </ul>
                        <p class="text-muted mt-1 mb-0">Skills : <span th:text="${offer.skills}"></span></p>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="candidates-list-fav-btn text-right">
                        <div class="candidates-listing-btn mt-4">
                            <a th:href="@{/offer/detail/{id}(id=${offer.idOffer})}" class="btn btn-primary-outline btn-sm">Details</a>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>
            </div>

            <br>

            <!--Nombre d'applications -->
            <div class="row align-items-center">
                <div class="col-lg-12">
                    <div class="show-results">
                        <div class="float-left">
                            <h5 class="text-dark mb-0 pt-2">Showing  Results : <span th:text="${nbrAll}"></span> application(s)</h5>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row" th:each="app: ${applications}">                
                <!--Candidates-->
                <div class="col-lg-8 col-md-8">
                    <div class="candidates-listing-item">
                        <div class="border mt-4 rounded p-3">
                            <div class="row">
                                <div class="col-md-9">
                                    <!-- <div class="float-left mr-4">
                                        <img src="https://via.placeholder.com/400X400//88929f/5a6270C/O https://placeholder.com/" alt="" class="d-block rounded" height="90">
                                    </div> -->
                                    <div class="candidates-list-desc overflow-hidden job-single-meta  pt-2">
                                        <h5 class="mb-2"><a href="#" class="text-dark"><span th:text="${app.candidate.name + ' '+ app.candidate.surname}"></span></a></h5>
                                        <ul class="list-unstyled">
                                            <li class="text-muted"><i class="mdi mdi-account mr-1"></i><span th:text="${app.candidate.email}"></span></li>
                                            <li class="text-muted"><i class="mdi mdi-account mr-1"></i><span th:text="${app.candidate.phoneNumber}"></span></li>
                                        </ul>
<!--                                        <p class="text-muted mt-1 mb-0">Skills : HTML, CSS, JavaScript, Wordpress, PHP(A voir).</p>-->
                                            <p class="text-muted mt-1 mb-0">Similarity : <span th:text="${app.similarity}"></span>%</p>
                                        <div class="progress">
                                            <div class="progress-bar progress-bar-striped position-relative bg-primary" th:style="'width: ' + ${app.similarity} + '%;'">
<!--                                                <div class="progress-value d-block text-muted h6"><span th:text="${app.similarity}"></span>%</div>-->
                                            </div>
                                        </div>
                                            <p class="text-muted mt-1 mb-0">Missing skills : <span th:text="${app.missingSkills}"></span></p>
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="candidates-list-fav-btn text-right">
                                        <div class="fav-icon">
                                            <i class="mdi mdi-heart"></i>
                                        </div>
                                        <div class="candidates-listing-btn mt-4">
                                            <a th:href="@{/application/resume/{id}(id=${app.id})}" class="btn btn-primary-outline btn-sm">View Resume</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>


                </div>
                <!--Applications-->
                <div class="col-lg-4 col-md-4">
                    <div class="left-sidebar">
                        <div class="accordion" id="accordionExample">
                            
                            <div class="grid-item-content p-3">
                                <ul class="list-inline mb-0">
                                    <li class="list-inline-item f-15"><span class="badge badge-success">Application</span></li>
                                </ul>
                            </div>

                            <div class="apply-button p-3 border-top">
                                <th:block th:if="${app.confirmation == null}">
                                    <a th:href="@{/application/accept/{id}(id=${app.id})}" class="btn btn-success mb-3 mr-2">Accept</a>
                                    <a th:href="@{/application/reject/{id}(id=${app.id})}" class="btn btn-danger mb-3 mr-2">Reject</a>

<!--                                    <div class="alert alert-primary" role="alert">This application has not been processed</div>-->
                                </th:block>

                                <th:block th:if="${app.confirmation}">
                                    <th:block th:if="${app.dateInterview != null}">
                                        <div class="grid-list-desc mt-3">
                                            <p class="text-muted f-14 mb-1">Date Interview : <span th:text="${app.dateInterview}"></span></p>
                                            <p class="text-muted f-14 mb-1">Time Interview : <span th:text="${app.timeInterview}"></span> </p>
                                        </div>
                                    </th:block>
                                    <th:block th:if="${app.dateInterview == null}">
                                        <div class="grid-list-desc mt-3">
                                            <h5 class="mb-1"><a href="#" class="text-dark">Interview:</a></h5>
                                        <form  th:action="@{/application/accept/sendEmail/{id}(id=${app.id})}"  method="get">
                                            <div class="col-md-12">
                                                <div class="form-group position-relative">
                                                    <label>Date</label>
                                                    <input type="date" placeholder="dd/mm/yyyy"  name="date1"  id="subject" class="form-control" >
                                                    <label>Time</label>
                                                    <input type="time"  name ="time1" class="form-control" >
                                                </div>
                                            </div><!--end col-->
                                            <div class="apply-button p-3 border-top">
                                                <button type="submit" class="btn btn-primary btn-sm">Send Email</button>
                                            </div>
                                        </form>
                                        </div>
                                    </th:block>
                                </th:block>

                                <th:block th:if="${app.confirmation == false}">
                                    <div class="alert alert-danger" role="alert"> You have REJECTED this application</div>
                                </th:block>
                            </div>
                        </div>
                    </div>

        

                        </div>
                    </div>
                </div>

        </div>
        </div>
        </div>
        </div>
        </div>
    </section>
    <!-- CANDIDATES LISTING END -->
<section class="section pt-0">
    <div class="container">
<!--HEEERE-->
<div class="row align-items-center">
    <div class="col-lg-12">
        <div class="show-results">
            <div class="float-left">
                <h5 class="text-dark mb-0 pt-2">Suggestions : <span th:text="${nbrsugg}"></span> </h5>
            </div>
        </div>
    </div>
</div>
<!-- Suggestions -->
        <th:block th:if="${nbrsugg > 0}">
<div th:each="map: ${resumes}">
    <div class="col-lg-8 col-md-8"  >
        <div class="candidates-listing-item" th:each="app: ${map.value}">
            <div class="border mt-4 rounded p-3">
                <div class="row" >
                    <div class="col-md-9">
                        <!-- <div class="float-left mr-4">
                            <img src="https://via.placeholder.com/400X400//88929f/5a6270C/O https://placeholder.com/" alt="" class="d-block rounded" height="90">
                        </div> -->
                        <div class="candidates-list-desc overflow-hidden job-single-meta  pt-2">
                            <h5 class="mb-2"><a href="#" class="text-dark"><span th:text="${app.candidate.name + ' '+ app.candidate.surname}"></span></a></h5>
                            <ul class="list-unstyled">
                                <li class="text-muted"><i class="mdi mdi-account mr-1"></i><span th:text="${app.post}"></span></li>
                                <li class="text-muted"><i class="mdi mdi-account mr-1"></i><span th:text="${app.candidate.email}"></span></li>
                                <li class="text-muted"><i class="mdi mdi-account mr-1"></i><span th:text="${app.candidate.phoneNumber}"></span></li>
                            </ul>
                            <p class="text-muted mt-1 mb-0">Experience : <span th:text="${app.experience}"></span></p>
                            <p class="text-muted mt-1 mb-0">Skills : <span th:text="${app.skills}"></span></p>
                            <p class="text-muted mt-1 mb-0">Similarity : <span th:text="${map.key}"></span>%</p>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped position-relative bg-primary" th:style="'width: ' + ${map.key} + '%;'">
                                </div>
                            </div>

                            <!--                                    <p class="text-muted mt-1 mb-0">Missing skills : <span th:text="${app.missingSkills}"></span></p>-->
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="candidates-list-fav-btn text-right">
                            <div class="fav-icon">
                                <i class="mdi mdi-heart"></i>
                            </div>
                            <div class="candidates-listing-btn mt-4">
                                <a th:href="@{/suggestion/resume/{id}(id=${app.idResume})}" class="btn btn-primary-outline btn-sm">View Resume</a>
                            </div>
                            <div class="candidates-listing-btn mt-4">
                                <a th:href="@{/suggestion/resume/sendEmail/{id}(id=${app.idResume})}" class="btn btn-primary-outline btn-sm">Send Email</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>
        </th:block>
</div>
</section>
<!--END HERE-->



<!-- footer start -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-12 mb-0 mb-md-4 pb-0 pb-md-2">
                <a href="javascript:void(0)"><img src="images/light3.png" height="60"  width="230" alt=""></a>
            </div>
            <div class="col-lg-3 col-md-4 col-12 mt-4 mt-sm-0 pt-2 pt-sm-0">
                <p class="mt-4">Our e-recruitment platform provides a user-friendly and efficient solution for both employers and job seekers, simplifying the recruitment process and facilitating successful matches between talented candidates and top-notch companies. </p>

            </div>
            <div class="col-lg-3 col-md-4 col-12 mt-4 mt-sm-0 pt-2 pt-sm-0">
                <p class="text-white mb-4 footer-list-title">Our Email :</p>
                <ul class="list-unstyled footer-list">
                    <li><a href="#" class="text-foot">jobMatchNow.platform@gmail.com</a></li>
                </ul>
            </div>

            <div class="col-lg-3 col-md-4 col-12 mt-4 mt-sm-0 pt-2 pt-sm-0">
                <p class="text-white mb-4 footer-list-title f-17">Contacts</p>
                <ul class="social-icon social list-inline mb-0">
                    <li class="list-inline-item"><a href="#" class="rounded"><i class="mdi mdi-facebook"></i></a></li>
                    <li class="list-inline-item"><a href="#" class="rounded"><i class="mdi mdi-twitter"></i></a></li>
                    <li class="list-inline-item"><a href="#" class="rounded"><i class="mdi mdi-instagram"></i></a></li>
                    <li class="list-inline-item"><a href="#" class="rounded"><i class="mdi mdi-google"></i></a></li>
                </ul>
            </div>


        </div>
    </div>
</footer>
<!-- footer end -->



<!-- javascript -->
<script src="../../js/jquery.min.js"></script>
<script src="../../js/bootstrap.bundle.min.js"></script>
<script src="../../js/jquery.easing.min.js"></script>
<script src="../../js/plugins.js"></script>

<!-- selectize js -->
<script src="../../js/selectize.min.js"></script>

<script src="../../js/jquery.nice-select.min.js"></script>

<script src="../../js/app.js"></script>

</body>
</html>